---
layout: post
title: "linux下C++编译器G++的使用" 
date: 2016-09-17 11:25:07 +0800
categories: C++
tags: C++ g++ linux
---
* content
{:toc}

![](http://i.imgur.com/BdpX9tv.jpg)









实验室的课题以及平时程序代码的编写，在Windows环境下，基本上都是通过IDE来编写调试程序，但是在linux环境下通过`g++`编译器和`vim`编辑器来编写程序，在体验上更加`geek`，通过在linux系统下工作学习，真正的达到了心无旁骛，专心写代码，谨以此作个简单的记录。接下来的时间，将算法方面的学习转移到linux上，熟悉linux环境下`g++`编程和`gdb`调试以及了解`makefile`的编写。


## 流程 ##

linux下的可执行文件并不像Windows系统以`.exe`文件后缀标志，只需要分配`x`(可执行)权限即可`sudo chmod u+x excutefile`

```cpp
源文件-->预处理-->编译-->汇编-->链接-->可执行文件

```

关于详细流程可参考：[C/C++程序编译流程（预处理->编译->汇编->链接）](http://www.cnblogs.com/Lynn-Zhang/p/5377024.html)


```cpp
#include <iostream>
#define MAX 100
int main()
{
 std::cout<<MAX<<std::endl; //output the max
 return 0;
}

```

**1.预处理,生成.i的文件[预处理器cpp]**

```cpp
g++ -E test.cpp > test.i 
```

通过执行上面的命令，输出预处理后的文件，如下面部分可以看到主要做宏的替换、注释的消除以及找到相关库文件。



```cpp
song@song-pc:~$ cat test.i |less

# 1 "test.cpp"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "/usr/include/stdc-predef.h" 1 3 4
# 1 "<command-line>" 2
# 1 "test.cpp"
# 1 "/usr/include/c++/5/iostream" 1 3
# 36 "/usr/include/c++/5/iostream" 3
       
# 37 "/usr/include/c++/5/iostream" 3

# 1 "/usr/include/x86_64-linux-gnu/c++/5/bits/c++config.h" 1 3
# 194 "/usr/include/x86_64-linux-gnu/c++/5/bits/c++config.h" 3

# 194 "/usr/include/x86_64-linux-gnu/c++/5/bits/c++config.h" 3
namespace std
{
  typedef long unsigned int size_t;
  typedef long int ptrdiff_t;




}
# 216 "/usr/include/x86_64-linux-gnu/c++/5/bits/c++config.h" 3

/////////////////////省略了部分内容//////////////////////////////

# 2 "test.cpp" 2



# 4 "test.cpp"
int main()
{
 std::cout<<100<<std::endl;
 return 0;
}

```



**2.将预处理的文件转换成汇编语言，生成文件.s[编译器egcs]**

```cpp
g++ -S test.cpp
```

**3.汇编变为目标代码，生成.O文件**

```cpp
g++ -C test.cpp

```

**4.连接目标代码，生成可执行程序**

```cpp
g++ test.o -L F:\include\iostream

```

将`.o`文件与所需的库文件链接整合成可执行文件。















